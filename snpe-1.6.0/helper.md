### see 
### https://developer.qualcomm.com/software/snapdragon-neural-processing-engine/getting-started

## Setup the SDK

cd /home/wurui/project/android/snpe-1.6.0

export ANDROID_NDK_ROOT=~/Android/Sdk/ndk-bundle

(for caffe:)

source ./bin/envsetup.sh -c /home/wurui/dl_rpository/caffe-sphereface

(for tensorflow:)

source ./bin/envsetup.sh -t /usr/local/lib/python2.7/dist-packages/tensorflow



'''

The initialization will set or update $SNPE_ROOT, $PATH, $LD_LIBRARY_PATH, $PYTHONPATH, $CAFFE_HOME, $TENSORFLOW_HOME, and in addition it will copy the Android NDK *libgnustl_shared.so* library locally, and update the Android AAR archive.

'''

# convert tf/caffe model to DLC model
cd /home/cvrsg/Desktop/myfprojects/snpe-1.6.0

### Download&convert caffe alexnet model

python ./models/alexnet/scripts/setup_alexnet.py -a ./temp-assets-cache -d

### Download&convert tensorflow inception_v3 model

python ./models/inception_v3/scripts/setup_inceptionv3.py -a ./temp-assets-cache -d

### convert tensorflow openpose mobilenet model

python ./models/tf_mobilenet/scripts/setup_tf_mobilenet_openpose.py -a ./temp-assets-cache

### convert caffe seetaface model

python ./models/alexnet/scripts/setup_seetaface.py -a ./temp-assets-cache



### convert caffe sphereface model

python ./models/sphereface/scripts/setup_sphereface.py -a ./temp-assets-cache

##### prepare face data:

python ./models/sphereface/scripts/squarecutandresize.py -i ./models/sphereface/data -o ./models/sphereface/data/cropped



### convert caffe openpose coco model

python ./models/openpose_caffe/scripts/setup_openpose_caffe_coco.py -a ./temp-assets-cache

##### prepare face data:

python ./models/openpose_caffe/scripts/squarecutandresize.py -i  ./models/openpose_caffe/data -o ./models/openpose_caffe/data/cropped



### convert caffe openpose mpi model

python ./models/openpose_caffe/scripts/setup_openpose_caffe_mpi.py -a ./temp-assets-cache

##### prepare face data:

python ./models/openpose_caffe/scripts/squarecutandresize.py -i  ./models/openpose_caffe/data -o ./models/openpose_caffe/data/cropped



### convert tensorflow facenet resnet model

python ./models/inception_v3/scripts/setup_tf_facenet.py -a ./temp-assets-cache



## Build the Example Android APP

cd /home/wurui/project/android/snpe-1.6.0/examples/android/image-classifiers

cp ../../../android/snpe-release.aar ./app/libs

bash ./setup_models_alexnet.sh

bash ./setup_models_inception_v3.sh

bash ./setup_models_tf_openpose.sh

bash ./setup_models_sphereface.sh

bash ./setup_models_openpose_caffe_coco.sh

bash ./setup_models_openpose_caffe_mpi.sh

## SNPE不能转换mobilenet模型

猜想一：

mobilenet的模型支持tensorflow>1.2.1

高通SNPE sdk只支持tensorflow=1.0.0

猜想二：

SNPE SDK支持的operatoin：

- The TensorFlow converter does not support conversion of TensorFlow graphs that have been quantized using TensorFlow tools. In order to quantize a TensorFlow model, run the TensorFlow converter ([snpe-tensorflow-to-dlc](tools.html#tools_snpe-tensorflow-to-dlc)) first, then run [snpe-dlc-quantize](tools.html#tools_snpe-dlc-quantize) on the DLC file generated by the TensorFlow converter.

- Convolution

  - BiasAdd node is optional and when missing a bias of zeros will be added.

- Concat

  - Concat node must have at least 2 non Const inputs.

- ElementWise Sum/Mul/Max

  - Must be the only operation within it's scope.


  - Does not support scalar operands.

- Fully Connected

  - Inputs to MatMul operation must be 1D.

todo:

尝试caffe模型转dlc，要求速度达到4fps





/data/user/0/com.example.wurui.facedlii/app_cascade/lbpcascade_frontalface.xml